<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quick Recipe</title>
    <link rel="icon" type="image/x-icon" href="/imgs/favicon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&display=swap"
        rel="stylesheet">
    <!-- Kumbh Sans font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Kumbh+Sans:wght@100..900&family=Lora:ital,wght@0,400..700;1,400..700&display=swap"
        rel="stylesheet">
    <!-- font Awesome -->
    <link rel="stylesheet" href="css/all.min.css" />
    <!-- css -->
    <link rel="stylesheet" href="css/homeStyle.css" />
    <!-- MDB -->
    <link rel="stylesheet" href="css/mdb.min.css" />
</head>

<style>
    /* navbar */
    .nav-link{
    position: relative;
}
.nav-link::before {
    content: "";
    position: absolute;
    left: 0;
    bottom: 0;
    height: 2px;
    width: 0;
    background-color: white;
    transition: 0.5s ease;
}
.nav-link:hover {
    transition-delay: 0.5s;
}

/* .nav-link:hover::before {
    width: 100%;
} */
 .nav-link:focus::before,
 .link-checked::before,
 .nav-link:hover::before{
    width: 100%;
}
    /* end navbar */
    .landing-comm {
        background-image: url(imgs/landingcomm.jpg);
        background-size: cover;
        background-position: center center;
        position: relative;
    }

    .landing-comm::before {
        content: "";
        position: absolute;
        inset: 0;
        background-color: rgba(0, 0, 0, 0.45);
        width: 100%;
        height: 100%;
    }

    .breadcrumb {
        width: fit-content;
        margin: auto;
        color: black !important;
        padding: 5px;
        border-radius: 1px;
        background-color: rgba(255, 255, 255, .30) !important;
    }

    .active a {
        color: #ff9638 !important;
    }

    .info .card .card-body i {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background-color: #ff9638;
        color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: auto;
        box-shadow: 2px 2px 2px rgb(199, 198, 198);
    }

    .info .card {
        background-color: #f4f1ea80;
        height: 100%;
    }
    /* //RATING */
      .rating i {
      font-size: 1.5rem;
      color: #ccc;
      cursor: pointer;
    }
    .rating i.active {
      color: gold;
    }
</style>

<body>


    <!-- start nav -->
    <div class="header ">
        <nav class="navbar navbar-expand-lg fixed-top " id="navbar">
            <div class="container">
                <a class="navbar-brand" href="#">
                    <img src="imgs/logo-white.png" alt="" class="img-fluid w-50">
                </a>
                <button data-mdb-collapse-init class="navbar-toggler" type="button" data-mdb-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="collapse navbar-collapse " id="navbarNav">
                    <ul class="navbar-nav ms-auto gap-4 ">
                        <li class="nav-item ">
                            <a class="nav-link text-white" href="home.html">HOME</a>
                        </li>
                        <!-- <li class="nav-item dropdown">
                                <a data-mdb-dropdown-init class="nav-link dropdown-toggle text-white" href="#"
                                    id="navbarDropdownMenuLink" role="button" aria-expanded="false">Recipes</a>
                                <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                    <li><a class="dropdown-item" href="#">Action</a></li>
                                    <li><a class="dropdown-item" href="#">Another action</a></li>
                                    <li><a class="dropdown-item" href="#">Something else here</a></li>
                                </ul>
                            </li> -->
                        <li class="nav-item">
                            <a class="nav-link text-white " href="chiefs.html">CHIEFS</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a data-mdb-dropdown-init class="nav-link dropdown-toggle text-white" href="#"
                                id="navbarDropdownMenuLink" role="button" aria-expanded="false">PAGES</a>
                            <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                <li><a class="dropdown-item" href="recipe-details.html">Recipe Details</a></li>
                                <li><a class="dropdown-item" href="recipesByCategory.html">Category Recipes</a></li>
                                <li><a class="dropdown-item" href="login&signup.html">Login & signUp</a></li>
                            </ul>
                        </li>
                        <li class="nav-item ">
                            <a class="nav-link text-white" href="contactUs.html">CONTACT</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>
    <!-- end nav -->
    <!-- start landing -->
    <div class="landing-comm p-5">
        <div class="container">
            <div class="landing-text p-5 m-auto text-center text-white position-relative">
                <h2>Recipe Details</h2>
                <ol class="breadcrumb text-white">
                    <li class="breadcrumb-item "><a href="home.html" class="text-black">Home</a></li>
                    <li class="breadcrumb-item active" aria-current="page"><a href="#" id="currNavigate"></a></li>
                </ol>
            </div>
        </div>
    </div>
    <!-- end landing -->
    <!--main content  -->
    <section class="mt-5">
        <div class="container">
            <div class="special-heading">
                <div class="title">Explore this collection of our all-time best dinner recipes</div>
                <h2 class="widgettitle"> Recipe details</h2>
                <div class="separate">
                    <img src="imgs/separate.png" alt="">
                </div>
            </div>
        <div class="mb-3 col-6 m-auto text-center">
            <label for="recipe" class="form-label m-3">Choose your recipe from the list:</label>
            <input class="form-control" list="recipes" placeholder="Type to search..."
                oninput="searchMeals(this.value)">

            <datalist id="recipes">
                <!-- Options will be populated here dynamically -->
            </datalist>
            <!-- Button to display the selected recipe -->
            <button class="btn btn-primary mt-3" id="show-recipe-btn" onclick="showRecipeDetails()" disabled>Show Recipe
                Details</button>
        </div>
            <div class="recipe mt-3" id="recipe">
                <!-- <div class="row ">
                    <div class="col-md-6 order-md-2">
                        <a data-mdb-ripple-init href="#!">
                            <img alt="example" class="img-fluid rounded" src="https://mdbcdn.b-cdn.net/img/new/standard/city/044.webp" />
                        </a>
                        <div class="text-center mt-2">
                            <h3>Rate</h3>
                            <div class="rating" id="rating">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                            <p>Your Rating: <span id="rating-value">0</span>/5</p>
                        </div>
                    </div>
                    <div class="col-md-6 ">
                        <div class="card"></div>
                            <div class="card-body">
                                <h4 class="card-title">Delicious Pasta Recipe</h4>
                                <h6 class="card-subtitle mb-2 text-muted">Category: Italian | Servings: 4</h6>
                                <p class="card-text">A quick and easy recipe for a mouth-watering pasta dish. Follow the instructions to enjoy a
                                    delightful meal with your loved ones!</p>
                        
                                
                                <h5>Ingredients</h5>
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item">200g pasta</li>
                                    <li class="list-group-item">2 tablespoons olive oil</li>
                                    <li class="list-group-item">1 clove garlic, minced</li>
                                    <li class="list-group-item">1/2 cup tomato sauce</li>
                                    <li class="list-group-item">Salt and pepper to taste</li>
                                </ul>
                                <h5 class="mt-4">Instructions</h5>
                                <ol class="list-group list-group-numbered">
                                    <li class="list-group-item">Boil the pasta in salted water until al dente.</li>
                                    <li class="list-group-item">Heat olive oil in a pan and sauté garlic.</li>
                                    <li class="list-group-item">Add tomato sauce and let simmer for 5 minutes.</li>
                                    <li class="list-group-item">Mix the pasta with the sauce, add salt and pepper to taste.</li>
                                    <li class="list-group-item">Serve hot and enjoy!</li>
                                </ol>
                        
                                <div class="mt-3">
                                    <h6>Cooking Time: 20 minutes</h6>
                                    <h6>Difficulty: Easy</h6>
                                </div>
                            </div>
                        </div>
                </div> -->
            </div>
        </div>
    </section>
    <!--end main content  -->




        <!-- Footer -->
        <footer class=" mt-4">
            <div class="container">
                <div class="row g-3">
                    <div class=" col col-md-6 col-lg-3 ">
                        <h5 class="">About Us</h5>
                        <div class="AboutUs-content small text-white mb-3"> Browse our extensive collection of recipes
                            that
                            includes
                            thousands of recipes for cookies, cakes, breads, rolls and main dishes.</div>
                        <div class="mb-2"><i class="fa-solid fa-location-dot text-white me-2"></i><small>498 Park
                                Presidio Blvd,
                                San Francisco</small></div>
                        <div class="mb-2"> <i
                                class="fa-regular fa-envelope text-white me-2"></i><small>info@example.com</small>
                        </div>
                        <div class="mb-2"><i class="fa-solid fa-phone text-white me-2"></i><small>+123 456 679
                                123</small></div>
                    </div>
                    <div class="Quick-Links col col-md-6 col-lg-2 ">
                        <h5 class="">Quick Links</h5>
                        <ul class="list-unstyled">
                            <li class="mb-2 small"><a href="#!">About Us</a> </li>
                            <li class="mb-2 small"><a href="#!">Submit Your Recipe</a></li>
                            <li class="mb-2 small"> <a href="#!">Privacy Policy</a></li>
                            <li class="mb-2 small"><a href="#!">Terms & Conditions</a></li>
                            <li class="mb-2 small"><a href="#!">Submit Your Recipes</a></li>
                        </ul>
                    </div>
                    <div class=" d-sm-none d-md-block col-md-6  d-lg-none"></div>
                    <!-- Grid column 3 -->
                    <div class="Courses col-sm-12 col-md-6 col-lg-2 ">
                        <h5 class="">Courses</h5>
                        <ul class="list-unstyled">
                            <li class="mb-2 small"><a href="#!">Appetizers</a></li>
                            <li class="mb-2 small"><a href="#!">Breads & Rolls</a></li>
                            <li class="mb-2 small"><a href="#!">Condiments</a></li>
                            <li class="mb-2 small"><a href="#!">Desserts</a></li>
                            <li class="mb-2 small"><a href="#!">Dinners</a></li>
                        </ul>
                    </div>
                    <div class="footer-recent-recipe col col-md-6 col-lg-3">
                        <h5 class="">Recent Recipes</h5>
                        <div class="d-flex gap-3 align-items-center">
                            <div><img src="imgs/recipe-2.jpg" alt="" class="img-fluid"></div>
                            <div>
                                <a href="" class="d-block small">Black Bean Sweet Potato Bowl</a>
                                <i class="far fa-calendar me-2"></i><small>April 10, 2022</small>
                            </div>
                        </div>
                        <hr style="width: 90%;">
                        <div class="d-flex gap-3 align-items-center">
                            <div><img src="imgs/recipe-3.jpg" alt="" class="img-fluid"></div>
                            <div>
                                <a href="" class="d-block small">How to add fibre to...</a>
                                <i class="far fa-calendar me-2 "></i><small>April 15, 2022</small>
                            </div>
                        </div>
                    </div>
                    <div class="col col-md-6 col-lg-2">
                        <h5 class="">Social Links</h5>
                        <ul class="social-icons list-unstyled d-flex gap-3 align-items-center">
                            <li><a href="#"><i class="fab fa-twitter"></i></a></li>
                            <li><a href="#"><i class="fab fa-facebook"></i></a></li>
                            <li><a href="#"><i class="fab fa-linkedin"></i></a></li>
                            <li><a href="#"><i class="fab fa-youtube"></i></a></li>
                            <li><a href="#"><i class="fab fa-instagram"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </footer>
        <!-- Footer -->


    <script type="text/javascript" src="js/mdb.umd.min.js"></script>
<script >
 function initNavbarScroll() {
            const navbar = document.getElementById('navbar');
            window.addEventListener("scroll", () => {
                if (window.scrollY >= 50) {
                    navbar.style.backgroundColor = "#ff9638";
                } else {
                    navbar.style.backgroundColor = "transparent";
                }
            });
        }
        initNavbarScroll()
        //--------------------------------case page is fired from home (recommended  or popular recipes section--------------------------------//
    document.addEventListener("DOMContentLoaded", () => {
        // Get the meal ID from the URL
        const params = new URLSearchParams(window.location.search);
        const mealId = params.get("recipe");
        console.log(mealId);
        if (mealId) {
            (async function () {
                try {
                    const response = await fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${mealId}`);
                    if (!response.ok) {
                        throw new Error("Network response was not ok " + response.statusText);
                    }
                    let data = await response.json();
                    let meal = data.meals;
                    document.getElementById("currNavigate").innerHTML = `${meal[0].strMeal}`;
                    if (meal && meal.length > 0) {
                        const instructionsArray = meal[0].strInstructions.split(/\r\n|\r|\n/).filter(step => step.trim() !== '');
                        const instructionsHtml = instructionsArray.map((step) => `<li class="list-group-item">${step}</li>`).join('');
                        // Collecting ingredients
                        const ingredientsHtml = [];
                        for (let i = 1; i <= 20; i++) { // Assuming a maximum of 20 ingredients
                            const ingredient = meal[0][`strIngredient${i}`];
                            const measure = meal[0][`strMeasure${i}`];
                            if (ingredient) {
                                ingredientsHtml.push(`<li class="list-group-item">${measure ? measure : ''} ${ingredient}</li>`);
                            }
                        }

                        document.getElementById("recipe").innerHTML = `
                        <div class="row ">
                            <div class="col-md-6 order-md-2">
                                <a data-mdb-ripple-init href="#!">
                                    <img alt="example" class="img-fluid rounded" src="${meal[0].strMealThumb}" />
                                </a>
                                <div class="text-center mt-2">
                                    <h3>Rate</h3>
                                    <div class="rating" id="rating">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                    </div>
                                    <p>Your Rating: <span id="rating-value">0</span>/5</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card"></div>
                                <div class="card-body">
                                    <h4 class="card-title mb-2">${meal[0].strMeal}</h4>
                                    <h6 class="card-subtitle mb-2 text-muted ">Delights of: ${meal[0].strCategory} | A Taste of: ${meal[0].strArea}</h6>
                                    <p class="card-text">A quick and easy recipe for a mouth-watering pasta dish. Follow the instructions to enjoy a delightful meal with your loved ones!</p>
                                    <!-- Ingredients List -->
                                    <h5>Ingredients</h5>
                                    <ul class="list-group list-group-flush">
                                        ${ingredientsHtml.join('')}
                                    </ul>
                                    <!-- Instructions -->
                                    <h5 class="mt-4">Instructions</h5>
                                    <ol class="list-group list-group-numbered">
                                        ${instructionsHtml}
                                    </ol>
                                    <!-- Additional Info -->
                                    <div class="mt-3">
                                        <h6 class="d-flex align-items-center gap-3">Recipe video:
                                            <a class="btn text-white text-nowrap" data-mdb-ripple-init style="background-color: #ff9638;" href="${meal[0].strMealThumb}" role="button">
                                                <i class="fab fa-youtube me-2"></i>
                                                Recipe Video
                                            </a>
                                        </h6>
                                        <h6>Difficulty: Easy</h6>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                        // Set up the rating functionality after the stars are added to the DOM
                        setupRatingFunctionality();
                    } else {
                        document.getElementById("recipe").innerHTML = `<p>No recipe found for the given ID.</p>`;
                    }
                } catch (error) {
                    console.error("There was a problem with the fetch operation:", error);
                    document.getElementById("recipe").innerHTML = `<p>There was an error fetching the recipe data.</p>`;
                }
            })();
        } else {
            document.getElementById("recipe").innerHTML = `<p>No recipe selected. Please choose a valid recipe.</p>`;
        }
    });
        //--------------------------------Rating section--------------------------------//

    function setupRatingFunctionality() {
        const stars = document.querySelectorAll('.rating i');
        const ratingValue = document.getElementById('rating-value');
        stars.forEach((star, index) => {
            star.addEventListener('click', () => {
                ratingValue.textContent = index + 1;
                stars.forEach((s, i) => s.classList.toggle('active', i <= index));
            });
        });
    }
//--------------------------------case page is fired from navbar directly--------------------------------//
    let selectedMeal; // To store the selected meal details

        async function searchMeals(meal) {
            if (meal.trim() === "") {
                document.getElementById("show-recipe-btn").disabled = true; // Disable button if input is empty
                return;
            } // Prevent fetching if input is empty

            try {
                let response = await fetch(`https://www.themealdb.com/api/json/v1/1/search.php?s=${meal}`);
                if (!response.ok) {
                    throw new Error("Network response is not ok " + response.statusText);
                }

                let data = await response.json();
                let meals = data.meals;

                let datalist = document.getElementById("recipes");
                datalist.innerHTML = ""; // Clear previous options

                if (meals === null) {
                    datalist.innerHTML = "<option value='No meals found'></option>";
                    document.getElementById("show-recipe-btn").disabled = true; // Disable button if no meals found
                    return;
                }

                // Populate the datalist with the meal names
                for (const meal of meals) {
                    datalist.innerHTML += `<option value="${meal.strMeal}" data-id="${meal.idMeal}">${meal.strMeal}</option>`;
                }

                // Store the selected meal information
                selectedMeal = meals; // Store the entire meal array
                document.getElementById("show-recipe-btn").disabled = false; // Enable button if meals are found

            } catch (error) {
                console.error("There was a problem with the fetch operation:", error);
            }
        }

        // Function to show the details of the selected recipe
        function showRecipeDetails() {
            if (!selectedMeal || selectedMeal.length === 0) {
                alert("Please select a valid recipe.");
                return;
            }

            const meal = selectedMeal[0]; // Get the first meal (assuming you want the first match)

            // Display the meal name
            document.getElementById("currNavigate").innerHTML = `${meal.strMeal}`;

            // Prepare instructions
            const instructionsArray = meal.strInstructions.split(/\r\n|\r|\n/).filter(step => step.trim() !== '');
            const instructionsHtml = instructionsArray.map((step) => `<li class="list-group-item">${step}</li>`).join('');

            // Collecting ingredients
            const ingredientsHtml = [];
            for (let i = 1; i <= 20; i++) { // Assuming a maximum of 20 ingredients
                const ingredient = meal[`strIngredient${i}`];
                const measure = meal[`strMeasure${i}`];
                if (ingredient) {
                    ingredientsHtml.push(`<li class="list-group-item">${measure ? measure : ''} ${ingredient}</li>`);
                }
            }

            // Update the recipe section with the meal details
            document.getElementById("recipe").innerHTML = `
        <div class="row ">
            <div class="col-md-6 order-md-2">
                <a data-mdb-ripple-init href="#!">
                    <img alt="example" class="img-fluid rounded" src="${meal.strMealThumb}" />
                </a>
                <div class="text-center mt-2">
                    <h3>Rate</h3>
                    <div class="rating" id="rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p>Your Rating: <span id="rating-value">0</span>/5</p>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card"></div>
                <div class="card-body">
                    <h4 class="card-title mb-2">${meal.strMeal}</h4>
                    <h6 class="card-subtitle mb-2 text-muted ">Delights of: ${meal.strCategory} | A Taste of: ${meal.strArea}</h6>
                    <p class="card-text">A quick and easy recipe for a mouth-watering pasta dish. Follow the instructions to enjoy a delightful meal with your loved ones!</p>
                    <!-- Ingredients List -->
                    <h5>Ingredients</h5>
                    <ul class="list-group list-group-flush">
                        ${ingredientsHtml.join('')}
                    </ul>
                    <!-- Instructions -->
                    <h5 class="mt-4">Instructions</h5>
                    <ol class="list-group list-group-numbered">
                        ${instructionsHtml}
                    </ol>
                    <!-- Additional Info -->
                    <div class="mt-3">
                        <h6 class="d-flex align-items-center gap-3">Recipe video:
                            <a class="btn text-white text-nowrap" data-mdb-ripple-init style="background-color: #ff9638;" href="${meal.strYoutube}" role="button">
                                <i class="fab fa-youtube me-2"></i>
                                Recipe Video
                            </a>
                        </h6>
                        <h6>Difficulty: Easy</h6>
                    </div>
                </div>
            </div>
        </div>
    `;

            // Set up the rating functionality after the stars are added to the DOM
            setupRatingFunctionality();
        }


</script>



</body>

</html>